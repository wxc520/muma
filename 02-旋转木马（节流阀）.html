<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>旋转木马轮播图</title>
  <link rel="stylesheet" href="css/css.css"/>
</head>
<body>
<div class="wrap" id="wrap">
  <div class="slide" id="slide">
    <ul>
      <li><a href="#"><img src="images/slidepic1.jpg" alt=""/></a></li>
      <li><a href="#"><img src="images/slidepic2.jpg" alt=""/></a></li>
      <li><a href="#"><img src="images/slidepic3.jpg" alt=""/></a></li>
      <li><a href="#"><img src="images/slidepic4.jpg" alt=""/></a></li>
      <li id="last"><a href="#"><img src="images/slidepic5.jpg" alt=""/></a></li>
    </ul>
    <div class="arrow" id="arrow">
      <a href="javascript:;" class="prev" id="arrLeft"></a>
      <a href="javascript:;" class="next" id="arrRight"></a>
    </div>
  </div>
</div>

<script src="animate.js"></script>
<script>
  var datas = [
    {
      "width": 400,
      "top": 20,
      "left": 50,
      "opacity": 0.2,
      "zIndex": 2
    },//0
    {
      "width": 600,
      "top": 70,
      "left": 0,
      "opacity": 0.8,
      "zIndex": 3
    },//1
    {
      "width": 800,
      "top": 100,
      "left": 200,
      "opacity": 1,
      "zIndex": 4
    },//2
    {
      "width": 600,
      "top": 70,
      "left": 600,
      "opacity": 0.8,
      "zIndex": 3
    },//3
    {
      "width": 400,
      "top": 20,
      "left": 750,
      "opacity": 0.2,
      "zIndex": 2
    }//4
  ];
  
  
  var slide = document.getElementById("slide");
  var lis = slide.getElementsByTagName("li");
  var arrow = document.getElementById("arrow");
  var arrLeft = document.getElementById("arrLeft");
  var arrRight = document.getElementById("arrRight");
  
  
  var flag = true;//1. 定义了一把开着的锁
  
  for (var i = 0; i < lis.length; i++) {
    animate(lis[i], datas[i]);
  }
  
  slide.onmouseover = function () {
    animate(arrow, {opacity: 1});
  }
  
  slide.onmouseout = function () {
    animate(arrow, {opacity: 0});
  }
  
  arrRight.onclick = function () {
    //2. 先判断锁是不是开着的, 如果是开着的，才行
    if (flag) {
      
      //3. 先把门关上
      flag = false;
      console.log("关门");
      datas.unshift(datas.pop());
      for (var i = 0; i < lis.length; i++) {
        animate(lis[i], datas[i], function () {
          //4. 动画执行结束
          flag = true;
        });
      }
    }
  }
  
  //5. 点击左箭头
  arrLeft.onclick = function () {
    datas.push(datas.shift());
    for (var i = 0; i < lis.length; i++) {
      animate(lis[i], datas[i]);
    }
  }


</script>

</body>
</html>